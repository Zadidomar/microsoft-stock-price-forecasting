DATA MSF;
INPUT DATE $ PRICE LOGRETURN; 
;
CARDS;
1/31/2015 40.4 0.869752422
2/28/2015 43.85 1.08539604
3/31/2015 40.655 0.92713797
4/30/2015 48.64 1.196408806
5/31/2015 46.86 0.963404605
6/30/2015 44.15 0.94216816
7/31/2015 46.7 1.057757644
8/31/2015 43.52 0.931905782
9/30/2015 44.26 1.017003676
10/31/2015 52.64 1.189335743
11/30/2015 54.35 1.032484802
12/31/2015 55.48 1.020791168
1/31/2016 55.09 0.99297044
2/29/2016 50.88 0.923579597
3/31/2016 55.23 1.085495283
4/30/2016 49.87 0.902951295
5/31/2016 53 1.062763184
6/30/2016 51.17 0.965471698
7/31/2016 56.68 1.107680281
8/31/2016 57.46 1.013761468
9/30/2016 57.6 1.002436478
10/31/2016 59.92 1.040277778
11/30/2016 60.26 1.005674232
12/31/2016 62.14 1.031198141
1/31/2017 64.65 1.040392662
2/28/2017 63.98 0.989636504
3/31/2017 65.86 1.029384183
4/30/2017 68.46 1.03947768
5/31/2017 69.84 1.020157756
6/30/2017 68.93 0.986970218
7/31/2017 72.7 1.054693167
8/31/2017 74.77 1.028473177
9/30/2017 74.49 0.996255183
10/31/2017 83.18 1.116659954
11/30/2017 84.17 1.011901899
12/31/2017 85.54 1.016276583
1/31/2018 95.01 1.11070844
2/28/2018 93.77 0.986948742
3/31/2018 91.27 0.973339021
4/30/2018 93.52 1.024652131
5/31/2018 98.84 1.056886228
6/30/2018 98.61 0.997673007
7/31/2018 106.08 1.075752966
8/31/2018 112.33 1.058917798
9/30/2018 114.37 1.018160776
10/31/2018 106.81 0.93389875
11/30/2018 110.89 1.038198671
12/31/2018 101.57 0.915952746
1/31/2019 104.43 1.028157921
2/28/2019 112.03 1.072776022
3/31/2019 117.94 1.052753727
4/30/2019 130.6 1.107342717
5/31/2019 123.68 0.947013783
6/30/2019 133.96 1.083117723
7/31/2019 136.27 1.017243953
8/31/2019 137.86 1.011668012
9/30/2019 139.03 1.008486871
10/31/2019 143.37 1.031216284
11/30/2019 151.38 1.055869429
12/31/2019 157.7 1.04174924
1/31/2020 170.23 1.079454661
2/29/2020 162.01 0.951712389
3/31/2020 157.71 0.973458428
4/30/2020 179.21 1.136326168
5/31/2020 183.25 1.022543385
6/30/2020 203.51 1.110559345
7/31/2020 205.01 1.007370645
8/31/2020 225.53 1.100092678
9/30/2020 210.33 0.932603201
10/31/2020 202.47 0.962630153
11/30/2020 214.07 1.057292438
12/31/2020 222.42 1.039005933
1/31/2021 231.96 1.042891826
2/28/2021 232.38 1.001810657
3/31/2021 235.77 1.014588175
4/30/2021 252.18 1.069601731
5/31/2021 249.68 0.990086446
6/30/2021 270.9 1.084988786
7/31/2021 284.91 1.051716501
8/31/2021 301.88 1.059562669
9/30/2021 281.92 0.933881012
10/31/2021 331.62 1.176291146
11/30/2021 330.59 0.996894035
12/31/2021 336.32 1.017332648
1/31/2022 310.98 0.92465509
2/28/2022 298.79 0.960801338
3/31/2022 308.31 1.031861843
4/30/2022 277.52 0.900132983
5/31/2022 271.87 0.979641107
6/30/2022 256.83 0.944679442
7/31/2022 280.74 1.093096601
8/31/2022 261.47 0.931359977
9/30/2022 232.9 0.890733163
10/31/2022 232.13 0.99669386
11/30/2022 255.14 1.09912549
12/31/2022 239.82 0.939954535
1/31/2023 247.81 1.033316654
2/28/2023 249.42 1.006496913
3/31/2023 288.3 1.155881645
4/30/2023 307.26 1.065764828
5/31/2023 328.39 1.068769121
6/30/2023 340.54 1.036998691
7/31/2023 335.92 0.986433312
8/31/2023 327.76 0.975708502
9/30/2023 315.75 0.963357335
10/31/2023 338.11 1.070815519
11/30/2023 378.91 1.120670788
12/31/2023 376.04 0.992425642
1/31/2024 397.58 1.05728114
2/29/2024 413.64 1.040394386
3/31/2024 420.72 1.017116333
4/30/2024 389.33 0.925389808
5/31/2024 415.13 1.066267691
6/30/2024 446.95 1.076650688
7/31/2024 418.35 0.936010739
8/31/2024 417.14 0.997107685
9/30/2024 430.3 1.031548161
10/31/2024 406.35 0.944341157
;
RUN;

DATA MSF1;
SET MSF;
	LOGPRICE=LOG(PRICE); S=1; 
    T + 1;
	IF T<86 THEN S=0; TS=T*S; TMS=(T-86)*S;
DATA MSF2;
SET MSF1;
IF T>=86 THEN DELETE;
PROC REG DATA=MSF2;
MODEL LOGPRICE=T;
OUTPUT OUT=OUT1 RESIDUAL=R;
PROC ARIMA DATA=OUT1;
IDENTIFY VAR=R ESACF MINIC;
RUN;

/*------------------------ inserted my code here--------------------- */
ESTIMATE P=2 METHOD=ML PLOT; 
ESTIMATE Q=2 METHOD=ML PLOT; 
ESTIMATE P=1 Q=1 METHOD=ML PLOT;
PROC PRINT;
RUN;
/*------------------------ up to this--------------------- */

PROC ARIMA DATA=MSF1;
    IDENTIFY VAR=LOGPRICE NOPRINT CROSS=(T S TS);
    ESTIMATE P=1 INPUT=(T S TS) METHOD=ML PLOT;
    ESTIMATE P=2 INPUT=(T S TS) METHOD=ML PLOT;
    ESTIMATE Q=3 INPUT=(T S TS) METHOD=ML PLOT;
    ESTIMATE Q=2 INPUT=(T S TS) METHOD=ML PLOT;
    ESTIMATE Q=1 INPUT=(T S TS) METHOD=ML PLOT;
    ESTIMATE P=1 Q=1 INPUT=(T S TS) METHOD=ML PLOT;
    ESTIMATE P=1 Q=2 INPUT=(T S TS) METHOD=ML PLOT;
    ESTIMATE P=2 Q=1 INPUT=(T S TS) METHOD=ML PLOT;
    ESTIMATE P=2 Q=2 INPUT=(T S TS) METHOD=ML PLOT;
RUN;

PROC ARIMA DATA=MSF1;
IDENTIFY VAR=LOGPRICE NOPRINT CROSS=(T TMS); /*FIT WHATEVER U HAVE TO*/
    ESTIMATE P=1 INPUT=(T,TMS) METHOD=ML PLOT;
    ESTIMATE P=2 INPUT=(T,TMS) METHOD=ML PLOT;
    ESTIMATE Q=3 INPUT=(T,TMS) METHOD=ML PLOT;
    ESTIMATE Q=2 INPUT=(T,TMS) METHOD=ML PLOT;
    ESTIMATE Q=1 INPUT=(T,TMS) METHOD=ML PLOT;
    ESTIMATE P=1 Q=1 INPUT=(T,TMS) METHOD=ML PLOT;
    ESTIMATE P=1 Q=2 INPUT=(T,TMS) METHOD=ML PLOT;
    ESTIMATE P=2 Q=1 INPUT=(T,TMS) METHOD=ML PLOT;
    ESTIMATE P=2 Q=2 INPUT=(T,TMS) METHOD=ML PLOT;

RUN;


PROC ARIMA DATA=MSF2;
IDENTIFY VAR=LOGPRICE(1) ESACF MINIC;
ESTIMATE P=1 METHOD=ML PLOT;
RUN;


PROC ARIMA DATA=MSF1;
IDENTIFY VAR=LOGPRICE(1) NOPRINT CROSS=(S);
ESTIMATE P=1 INPUT=(S) METHOD=ML PLOT;
ESTIMATE P=1 INPUT=(/(1)S) METHOD=ML PLOT;
ESTIMATE P=1 INPUT=(1$S) METHOD=ML PLOT;
RUN;


PROC ARIMA DATA=MSF1;
IDENTIFY VAR=LOGPRICE(1) NOPRINT CROSS=(S(1));
ESTIMATE P=1 INPUT=(S) METHOD=ML PLOT;
ESTIMATE P=1 INPUT=(/(1)S) METHOD=ML PLOT;
ESTIMATE P=1 INPUT=(1$S) METHOD=ML PLOT;
RUN;


